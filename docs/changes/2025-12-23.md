# Changes Log â€” 2025-12-23

## Backend
- [15:10] Added PATCH /resume/:id/parsedData with ownership checks and whitelisted corrections. (files: backend/src/controllers/resumeController.js, backend/src/routes/resumeRoutes.js, backend/src/services/resumeCorrectionService.js)
- [15:12] Extended Resume schema with correction fields and updated matching/recommendation flows to prefer corrected parsed data. (files: backend/src/models/Resume.js, backend/src/services/matchingService.js, backend/src/services/hrWorkflowService.js, backend/src/services/recommendationService.js, backend/src/controllers/matchingController.js, backend/src/controllers/jobController.js, backend/src/controllers/hrWorkflowController.js)
- [15:45] Fixed corrected-data merge so summary/education remain visible while skills/location/years override. (files: backend/src/services/resumeCorrectionService.js, backend/src/controllers/__tests__/resumeCorrections.test.js)
- [15:55] Changed parsedDataCorrected to Mixed to avoid defaulting empty education/experience when only skills/location are corrected. (files: backend/src/models/Resume.js)
- [16:05] Added snake_case date mapping in resume transformer so experience entries persist (start_date/end_date). (files: backend/src/services/aiTransformers.js, backend/src/controllers/__tests__/resumeCorrections.test.js)
- [16:12] Broadened experience mapping (employer/title/start/end/highlights) to retain entries from varied AI outputs. (files: backend/src/services/aiTransformers.js, backend/src/controllers/__tests__/resumeCorrections.test.js)
- [16:18] Added top-level key fallbacks (Experience/education/skills/summary/location) to avoid data loss from casing differences. (files: backend/src/services/aiTransformers.js, backend/src/controllers/__tests__/resumeCorrections.test.js)
- [16:25] AI service fallback now extracts experience when company and role appear on separate lines (no "at"). (files: ai-service/services/resume_parser.py)
- [16:40] Strengthened AI resume parsing: section-aware prompt, bullets preserved, contact-noise filtered, stricter schema. (files: ai-service/services/resume_parser.py)
- [16:50] Backend transformer now filters experience rows that look like contact/education noise. (files: backend/src/services/aiTransformers.js)
- [16:55] AI service falls back to heuristic experience/education extraction when LLM output is empty. (files: ai-service/services/resume_parser.py)
- [17:05] Experience heuristic now scopes to the Experience section (when present) and skips education-like lines to reduce noise. (files: ai-service/services/resume_parser.py)
- [17:20] Education parsing improved: capture full degree names and append CGPA when present (LLM prompt + heuristic). (files: ai-service/services/resume_parser.py)
- [17:35] Experience parsing enhanced with heading-based block extraction (## Company, Role, dates, bullets) before fallback pairing. (files: ai-service/services/resume_parser.py)
- [17:45] Further experience parsing improvements: prefer Experience section, detect heading/company-role-date blocks, then fallback to role-at-company and two-line pairing. (files: ai-service/services/resume_parser.py)
- [17:55] Experience blocks now capture location lines (Remote/onsite/city) alongside dates and bullets. (files: ai-service/services/resume_parser.py)
- [18:05] Consolidated experience: one entry per heading block (company/role/dates/location + all bullets). (files: ai-service/services/resume_parser.py)
- [18:20] Stop fallbacks once a block entry is captured to avoid duplicating bullets as separate experience rows. (files: ai-service/services/resume_parser.py)
- [18:30] Added debug logging of parsedData.experience during resume upload for troubleshooting. (files: backend/src/controllers/resumeController.js)
- [18:45] Backend transformer now consolidates experience: extracts dates/locations from text, dedupes by company+role, and drops bullet-only rows. (files: backend/src/services/aiTransformers.js)
- [18:55] Added verb-line filter to drop bullet-style experience rows (keeps only company/role/dates/location). (files: backend/src/services/aiTransformers.js)
- [19:05] Experience consolidation now also extracts dates from role text and locations from company text to recover missing entries. (files: backend/src/services/aiTransformers.js)
- [19:15] Broadened heading detection in experience parser (captures University/college titles) to keep multiple roles. (files: ai-service/services/resume_parser.py)
- [19:25] Experience block parsing now ignores bullets entirely and only captures company/role/dates/location lines. (files: ai-service/services/resume_parser.py)
- [19:40] Simplified experience parsing (role-at-company + pairing fallback) and simplified transformer (no verb filtering, basic mapping). (files: ai-service/services/resume_parser.py, backend/src/services/aiTransformers.js)
- [19:50] Reintroduced verb-line filter and basic company/role shape checks to drop bullet-like experience rows. (files: backend/src/services/aiTransformers.js)

## Frontend
- [15:18] Added resume edit mode for skills/years/location, PATCH client, and verified badge in viewer. (files: frontend/src/pages/candidate/CandidateResumesPage.tsx, frontend/src/api/candidate.ts, frontend/src/components/ResumeViewer.tsx, frontend/src/types/api.ts)
- [15:46] Resume viewer now merges corrected fields over original parsed data, preserving summary/education. (files: frontend/src/components/ResumeViewer.tsx)

## Tests
- [15:20] Added correction endpoint tests covering auth, ownership, validation, and happy path. (files: backend/src/controllers/__tests__/resumeCorrections.test.js)

